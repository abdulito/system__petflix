{
  "type": "service",
  "name": "api",
  "description": "Backend API for Petflix app",

  "secrets": {
    "mongodb-uri": {},
    "ssh-key": {}
  },
  "components": [
    {
      "name": "api",
      "ports": [
        {
          "name": "http",
          "port": 80,
          "protocol": "HTTP"
        }
      ],
      "build": {
        "git_repository": {
          "url": "git@github.com:mlab-lattice/example-petflix-www.git",
          "commit": "08c58b1e42542af92c7078c8d345f09d00e1eb17",
          "ssh_key": { "secret": "ssh-key" }
        },
        "language": "node:boron",
        "command": "npm install"
      },
      "exec": {
        "command": [
          "node",
          "index.js"
        ],
        "environment": {
          "MONGODB_URI": { "secret": "mongodb-uri" },
          "PORT": "80"
        }
      }
    }
  ],
  "resources": {
    "num_instances": 1,
    "instance_type": "t2.small"
  }
}
